# Ohio BRFSS - SQL Explorer

A local-first, AI-powered SQL explorer for the Ohio Behavioral Risk Factor Surveillance System (BRFSS) datasets.

This Next.js application runs entirely in the browser using [DuckDB-Wasm](https://duckdb.org/docs/api/wasm/overview.html) to query CSV files locally. It integrates with the Cerebras API (using `gpt-oss-120b`) to translate natural language questions into valid DuckDB SQL queries, context-aware of the specific BRFSS year data dictionaries.

## Features

- **Local SQL Execution**: Uses DuckDB Wasm to run high-performance SQL queries directly in your browser. No data leaves your machine.
- **AI SQL Drafting**: Ask questions in plain English ("What is the smoking rate in Franklin County in 2019?") and get SQL generated by Cerebras AI.
- **Context-Aware**: The AI agent is fed the specific column names, types, and descriptions for the years you have loaded.
- **Visualizations**: Export query results to PDF or send them to an integrated Pivot Table viewer for exploration.
- **Sample Queries**: Built-in library of common health queries (TBI, Smoking, BMI, etc.) that handle schema changes across years.

## Getting Started

### Prerequisites

- Node.js 18+
- A Cerebras API Key (Get one at [cloud.cerebras.ai](https://cloud.cerebras.ai/platform/))

### Installation

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/yourusername/brfss-clearinghouse.git
    cd brfss-clearinghouse
    ```

2.  **Install dependencies:**
    ```bash
    npm install
    ```

3.  **Run the development server:**
    ```bash
    npm run dev
    ```

4.  **Open the app:**
    Navigate to [http://localhost:3000](http://localhost:3000).

### Data Setup

The application expects Ohio BRFSS CSV files named `brfss16.csv` through `brfss23.csv` to be uploaded through the UI. These files are processed locally.

## API Keys

The application requires a Cerebras API key to use the "Ask LLM" feature.
- **Option 1 (UI)**: Click "LLM API Keys" in the top right and paste your key. It will be saved to your browser's `localStorage`.
- **Option 2 (Dev)**: Create a `secrets.json` file in the root directory (ignored by git) for development convenience:
    ```json
    {
      "cerebrasKey": "your-key-here"
    }
    ```

## License

Apache 2.0
